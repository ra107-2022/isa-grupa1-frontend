<!-- Loading -->
<div class="profile-page" *ngIf="loading">
  <div class="spinner">Loading profile...</div>
</div>

<!-- Error -->
<div class="profile-page error" *ngIf="!loading && errorMessage">
  <div>{{ errorMessage }}</div>
</div>

<!-- Profile Content -->
<div class="profile-page" *ngIf="!loading && userProfile">

  <div class="profile-container">

    <!-- Avatar + osnovne info -->
    <div class="avatar-section">
      <div class="avatar">
        {{ (userProfile.username || '').charAt(0).toUpperCase() || '?' }}
      </div>

      <div class="avatar-info">

        <!-- Display profile info when not editing -->
        <h2 *ngIf="!isEditing">
          {{ (userProfile.name || userProfile.surname)
            ? (userProfile.name || '') + ' ' + (userProfile.surname || '')
            : 'No name provided' }}
        </h2>

        <!-- Edit form -->
        <form *ngIf="isEditing" [formGroup]="editForm" (ngSubmit)="onSave()">
          <input formControlName="name" placeholder="Name" />
          <input formControlName="surname" placeholder="Surname" />
          <input formControlName="username" placeholder="Username" />
          <input formControlName="email" placeholder="Email" type="email" />
        </form>

        <p class="email">{{ userProfile.email || '-' }}</p>
      </div>
    </div>

    <!-- Username -->
    <div class="username-section">
      <p class="username">@{{ userProfile.username || 'unknown' }}</p>
    </div>

    <!-- Actions (Edit/Delete) -->
    <!-- Prikazujemo dugmad samo ako je My Profile -->
    <div class="profile-actions" *ngIf="isMyProfile === true">
      <button *ngIf="!isEditing" (click)="onEdit()">Edit Profile</button>
      <button *ngIf="isEditing" (click)="onSave()" [disabled]="editForm.invalid">Save</button>
      <button *ngIf="isEditing" (click)="onCancelEdit()">Cancel</button>
      <button class="delete" (click)="onDelete()">Delete Profile</button>
    </div>

  </div>

</div>
